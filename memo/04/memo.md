## 仮想メモリ

### 機能

- 複数のプロセスで一部のページを共有できる
- 外部デバイスとの通信をMemory Mapped I/Oで行う
    - 何らかのデバイスのポートに割り当てたアドレスに書いたりそこから読むことができる
- OSとファイルシステムと連携して外部ストレージのファイルに一部のページを対応させることができる

### なぜ物理メモリの上に仮想メモリを置くのか

仮想メモリを置くことで解決できる課題
- 同一データあるいはコードを複数プログラムから扱う際に個々にメモリ内に複製するムダ
- 任意のサイズのプログラム(たぶん物理メモリより大きくても)を実行したい
    - プログラムのうち、すぐ必要になる部分だけをロードする能力が必要
- いくつものプログラムをメモリに置きたい
- 

#### CPUチップ

- CPU データキャッシュ
    - LI
    - L2
    - L3
    - 命令キャッシュ
        - 命令のキューを格納
    - TLB   Translation Lookaside Buffer
        - 仮想メモリの性能を向上させる

もっともCPUに近いレベルのものはほとんどレジスタに迫るよう

データキャッシュ容量 > レジスタ


### アドレス空間

仮想アドレス = 論理アドレス

仮想アドレスと物理アドレスのプロキシが
**MMU** Memory Management Unit

仮想メモリはアプリケーションと物理メモリとのプロキシ
